import{p as J,G as Y,aO as X,i as Z,H as ee,a8 as te,a5 as ae,s as p,K as g,n as le,L as U,al as oe,v as se,aK as ne,b as a,W as ue,$ as L,aP as ie,aQ as O,M as re,N as ce,o as I,S as de,c as R,w as d,d as j,aC as K,U as P,aR as M,aD as S,aB as me,P as $,Q as A,a as b}from"./main-f48007bc.js";import{_ as fe}from"./eduall-62475736.js";import{s as V}from"./notification-17c9d469.js";import{V as q,a as N}from"./VRow-4b57cd29.js";import{V as ve,b as T}from"./VCard-4e460f18.js";import{V as pe}from"./VSkeletonLoader-21879cad.js";import{V as ge}from"./VForm-f5f36201.js";import{m as _e,b as be,a as ye,c as he}from"./VField-e6588e76.js";import{V as ke}from"./VOverlay-2fddccd8.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VAvatar-b21f0733.js";import"./VImg-cefe29a1.js";import"./forwardRefs-e658ad70.js";import"./index-d104eba4.js";import"./lazy-16af0335.js";const Ve=J({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Y(),..._e(),...X(be({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),we=Z()({name:"VOtpInput",props:Ve(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,y){let{attrs:C,emit:h,slots:f}=y;const{dimensionStyles:w}=ee(e),{isFocused:m,focus:v,blur:x}=ye(e),n=te(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:B}=ae(),l=p(()=>Number(e.length)),s=p(()=>Array(l.value).fill(0)),u=g(-1),D=g(),_=g([]),F=p(()=>_.value[u.value]);function E(){if(e.type==="number"&&/[^0-9]/g.test(F.value.value)){F.value.value="";return}const t=n.value.slice(),o=F.value.value;t[u.value]=o;let i=null;u.value>n.value.length?i=n.value.length+1:u.value+1!==l.value&&(i="next"),n.value=t,i&&O(D.value,i)}function Q(t){const o=n.value.slice(),i=u.value;let r=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?r="prev":t.key==="ArrowRight"?r="next":["Backspace","Delete"].includes(t.key)&&(o[u.value]="",n.value=o,u.value>0&&t.key==="Backspace"?r="prev":requestAnimationFrame(()=>{var c;(c=_.value[i])==null||c.select()})),requestAnimationFrame(()=>{r!=null&&O(D.value,r)}))}function W(t,o){var i,r;o.preventDefault(),o.stopPropagation(),n.value=(((i=o==null?void 0:o.clipboardData)==null?void 0:i.getData("Text"))??"").split(""),(r=_.value)==null||r[t].blur()}function z(){n.value=[]}function G(t,o){v(),u.value=o}function H(){x(),u.value=-1}return le({VField:{color:p(()=>e.color),bgColor:p(()=>e.color),baseColor:p(()=>e.baseColor),disabled:p(()=>e.disabled),error:p(()=>e.error),variant:p(()=>e.variant)}},{scoped:!0}),U(n,t=>{t.length===l.value&&h("finish",t.join(""))},{deep:!0}),U(u,t=>{t<0||oe(()=>{var o;(o=_.value[t])==null||o.select()})}),se(()=>{var i;const[t,o]=ne(C);return a("div",L({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[a("div",{ref:D,class:"v-otp-input__content",style:[w.value]},[s.value.map((r,c)=>a(ue,null,[e.divider&&c!==0&&a("span",{class:"v-otp-input__divider"},[e.divider]),a(he,{focused:m.value&&e.focusAll||u.value===c,key:c},{...f,loader:void 0,default:()=>a("input",{ref:k=>_.value[c]=k,"aria-label":B(e.label,c+1),autofocus:c===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:n.value[c],onInput:E,onFocus:k=>G(k,c),onBlur:H,onKeydown:Q,onPaste:k=>W(c,k)},null)})])),a("input",L({class:"v-otp-input-input",type:"hidden"},o,{value:n.value.join("")}),null),a(ke,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var r;return[((r=f.loader)==null?void 0:r.call(f))??a(ie,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(i=f.default)==null?void 0:i.call(f)])])}),{blur:()=>{var t;(t=_.value)==null||t.some(o=>o.blur())},focus:()=>{var t;(t=_.value)==null||t[0].focus()},reset:z,isFocused:m}}});const xe={class:"auth-wrapper d-flex align-center justify-center pa-4"},Se=b("div",{class:"d-flex justify-center mb-10 mt-5"},[b("img",{src:fe,alt:""})],-1),Ae=b("h5",{class:"text-h5 mb-1"}," Welcome to EduALL Assessment! 👋🏻 ",-1),Ce=b("p",{class:"mb-0"},[A(" Please sign in with your ticket number "),b("br"),A(" to begin the adventure. ")],-1),Be=b("h5",{class:"mb-3"}," I don't have a ticket number, ",-1),De={href:"https://registration.edu-all.com/form/event?ft=cta&ev=evt-0014&et=offline&as=attend&s=ots&t=self&a=true"},We={__name:"login",props:{ticket:String,id:String},setup(e){const y=e,{global:C}=re(),h=g(!0),f=g(null),w=g(!1),m=g(!1),v=g({ticket_id:""}),x=async()=>{if(v.value.ticket_id.length==4){m.value=!0;try{const l=await K.post("signin",{ticket_no:v.value.ticket_id});l.success?(P.saveUser(l.data),M.saveToken(l.data.token),S.push({name:"login"}),window.location.reload()):(v.value.ticket_id="",V("error",l.message,"bottom-end")),m.value=!1}catch(l){V("error",l,"bottom-end"),m.value=!1}}else w.value=!0},n=()=>{var s;const l=P.getUser();l&&(((s=l.client)==null?void 0:s.took_initial_assessment)==1?S.push({name:"dashboard"}):S.push({name:"assessment"}),setTimeout(()=>{V("success","You`ve successfully logged in","bottom-end")},1e3))},B=async l=>{try{const s=await K.get("signin/u/"+l);s.success?(P.saveUser(s.data),M.saveToken(s.data.token),S.push({name:"login"}),window.location.reload()):(v.value.ticket_id="",V("error",s.message,"bottom-end")),m.value=!1}catch(s){V("error",s,"bottom-end"),m.value=!1}};return ce(()=>{const l=localStorage.getItem("mode");l&&(C.name.value=l),y.ticket&&(v.value.ticket_id=y.ticket,x()),y.id&&B(y.id),setTimeout(()=>{h.value=!1},2e3),n()}),(l,s)=>(I(),de("div",xe,[h.value?(I(),R(q,{key:0,class:"justify-center"},{default:d(()=>[a(N,{md:"4"},{default:d(()=>[a(pe,{class:"mx-auto border",type:"image, article, paragraph, button",elevation:"12"})]),_:1})]),_:1})):j("",!0),h.value?j("",!0):(I(),R(ve,{key:1,class:"auth-card pa-4 pt-7","max-width":"500"},{default:d(()=>[Se,a(T,{class:"pt-2 text-center pb-3"},{default:d(()=>[Ae,Ce]),_:1}),a(T,null,{default:d(()=>[a(ge,{ref_key:"formData",ref:f,onSubmit:me(x,["prevent"])},{default:d(()=>[a(q,null,{default:d(()=>[a(N,{cols:"12",class:"pb-0"},{default:d(()=>[a(we,{modelValue:v.value.ticket_id,"onUpdate:modelValue":s[0]||(s[0]=u=>v.value.ticket_id=u),title:"Ticket Number",type:"text",length:"4",loading:m.value,error:w.value},null,8,["modelValue","loading","error"])]),_:1}),a(N,{cols:"12",class:""},{default:d(()=>[a($,{block:"",type:"submit",loading:m.value},{default:d(()=>[A(" Sign In ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1}),a(T,{class:"text-center"},{default:d(()=>[Be,b("a",De,[a($,{block:"",color:"secondary",type:"button"},{default:d(()=>[A(" Sign Up Now ")]),_:1})])]),_:1})]),_:1}))]))}};export{We as default};
