import{p as H,H as Q,aM as W,k as Y,J as Z,a6 as X,a3 as ee,c as m,L as p,s as te,M as T,aj as ae,x as le,aI as oe,d as l,S as se,Z as j,aN as ne,aO as q,an as ue,o as N,Q as ie,a as L,w as r,f as U,U as R,aG as x,ay as re,O as M,N as C,b,az as ce,aP as de}from"./main-467ab518.js";import{_ as fe}from"./eduall-62475736.js";import{s as P}from"./notification-17c9d469.js";import{V as z,a as D}from"./VRow-97c1bf50.js";import{V as me,b as O}from"./VCard-ab0d05e3.js";import{V as ve}from"./VSkeletonLoader-79c0289e.js";import{V as pe}from"./VForm-f145bf8d.js";import{m as _e,b as ge,a as be,c as ye}from"./VField-7f503b99.js";import{V as he}from"./VOverlay-84d371bb.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VAvatar-5bab7bd2.js";import"./VImg-46a17896.js";import"./forwardRefs-e658ad70.js";import"./index-51795e84.js";import"./lazy-15d2408a.js";const ke=H({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Q(),..._e(),...W(ge({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Ve=Y()({name:"VOtpInput",props:ke(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,w){let{attrs:k,emit:F,slots:c}=w;const{dimensionStyles:_}=Z(e),{isFocused:f,focus:B,blur:I}=be(e),a=X(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:g}=ee(),v=m(()=>Number(e.length)),S=m(()=>Array(v.value).fill(0)),s=p(-1),y=p(),d=p([]),h=m(()=>d.value[s.value]);function A(){if(e.type==="number"&&/[^0-9]/g.test(h.value.value)){h.value.value="";return}const t=a.value.slice(),o=h.value.value;t[s.value]=o;let n=null;s.value>a.value.length?n=a.value.length+1:s.value+1!==v.value&&(n="next"),a.value=t,n&&q(y.value,n)}function E(t){const o=a.value.slice(),n=s.value;let u=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?u="prev":t.key==="ArrowRight"?u="next":["Backspace","Delete"].includes(t.key)&&(o[s.value]="",a.value=o,s.value>0&&t.key==="Backspace"?u="prev":requestAnimationFrame(()=>{var i;(i=d.value[n])==null||i.select()})),requestAnimationFrame(()=>{u!=null&&q(y.value,u)}))}function J(t,o){var n,u;o.preventDefault(),o.stopPropagation(),a.value=(((n=o==null?void 0:o.clipboardData)==null?void 0:n.getData("Text"))??"").split(""),(u=d.value)==null||u[t].blur()}function K(){a.value=[]}function $(t,o){B(),s.value=o}function G(){I(),s.value=-1}return te({VField:{color:m(()=>e.color),bgColor:m(()=>e.color),baseColor:m(()=>e.baseColor),disabled:m(()=>e.disabled),error:m(()=>e.error),variant:m(()=>e.variant)}},{scoped:!0}),T(a,t=>{t.length===v.value&&F("finish",t.join(""))},{deep:!0}),T(s,t=>{t<0||ae(()=>{var o;(o=d.value[t])==null||o.select()})}),le(()=>{var n;const[t,o]=oe(k);return l("div",j({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[l("div",{ref:y,class:"v-otp-input__content",style:[_.value]},[S.value.map((u,i)=>l(se,null,[e.divider&&i!==0&&l("span",{class:"v-otp-input__divider"},[e.divider]),l(ye,{focused:f.value&&e.focusAll||s.value===i,key:i},{...c,loader:void 0,default:()=>l("input",{ref:V=>d.value[i]=V,"aria-label":g(e.label,i+1),autofocus:i===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:a.value[i],onInput:A,onFocus:V=>$(V,i),onBlur:G,onKeydown:E,onPaste:V=>J(i,V)},null)})])),l("input",j({class:"v-otp-input-input",type:"hidden"},o,{value:a.value.join("")}),null),l(he,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var u;return[((u=c.loader)==null?void 0:u.call(c))??l(ne,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(n=c.default)==null?void 0:n.call(c)])])}),{blur:()=>{var t;(t=d.value)==null||t.some(o=>o.blur())},focus:()=>{var t;(t=d.value)==null||t[0].focus()},reset:K,isFocused:f}}});const xe={class:"auth-wrapper d-flex align-center justify-center pa-4"},we=b("div",{class:"d-flex justify-center mb-10 mt-5"},[b("img",{src:fe,alt:""})],-1),Se=b("h5",{class:"text-h5 mb-1"}," Welcome to EduALL Assessment! 👋🏻 ",-1),Ae=b("p",{class:"mb-0"},[C(" Please sign in with your ticket number "),b("br"),C(" to begin the adventure. ")],-1),Ce=b("h5",{class:"mb-3"}," I don't have a ticket number, ",-1),Fe={href:"https://registration.edu-all.com/form/event?ft=cta&ev=evt-0014&et=offline&as=attend&s=ots&t=self&a=true"},Ke={__name:"login",props:{ticket:String},setup(e){const w=e,k=p(!0),F=p(null),c=p(!1),_=p(!1),f=p({ticket_id:""}),B=async()=>{if(f.value.ticket_id.length==4){_.value=!0;try{const a=await ce.post("signin",{ticket_no:f.value.ticket_id});a.success?(R.saveUser(a.data),de.saveToken(a.data.token),window.location.reload()):(f.value.ticket_id="",P("error",a.message,"bottom-end")),_.value=!1}catch(a){P("error",a,"bottom-end"),_.value=!1}}else c.value=!0},I=()=>{var g,v,S,s,y,d,h,A;const a=R.getUser();a&&((g=a.client)!=null&&g.is_vip||((S=(v=a.client)==null?void 0:v.education)==null?void 0:S.grade)<7?(s=a.client)!=null&&s.took_quest?x.push({name:"dashboard"}):x.push({name:"quest"}):((y=a.client)==null?void 0:y.took_initial_assessment)==1&&((d=a.client)==null?void 0:d.took_quest)==0?x.push({name:"quest"}):((h=a.client)==null?void 0:h.took_initial_assessment)==1&&((A=a.client)==null?void 0:A.took_quest)==1?x.push({name:"dashboard"}):x.push({name:"assessment"}),setTimeout(()=>{P("success","You`ve successfully logged in","bottom-end")},1e3))};return ue(()=>{w.ticket&&(f.value.ticket_id=w.ticket),setTimeout(()=>{k.value=!1},2e3),I()}),(a,g)=>(N(),ie("div",xe,[k.value?(N(),L(z,{key:0,class:"justify-center"},{default:r(()=>[l(D,{md:"4"},{default:r(()=>[l(ve,{class:"mx-auto border",type:"image, article, paragraph, button",elevation:"12"})]),_:1})]),_:1})):U("",!0),k.value?U("",!0):(N(),L(me,{key:1,class:"auth-card pa-4 pt-7","max-width":"500"},{default:r(()=>[we,l(O,{class:"pt-2 text-center pb-3"},{default:r(()=>[Se,Ae]),_:1}),l(O,null,{default:r(()=>[l(pe,{ref_key:"formData",ref:F,onSubmit:re(B,["prevent"])},{default:r(()=>[l(z,null,{default:r(()=>[l(D,{cols:"12",class:"pb-0"},{default:r(()=>[l(Ve,{modelValue:f.value.ticket_id,"onUpdate:modelValue":g[0]||(g[0]=v=>f.value.ticket_id=v),title:"Ticket Number",type:"text",length:"4",loading:_.value,error:c.value},null,8,["modelValue","loading","error"])]),_:1}),l(D,{cols:"12",class:""},{default:r(()=>[l(M,{block:"",type:"submit",loading:_.value},{default:r(()=>[C(" Sign In ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1}),l(O,{class:"text-center"},{default:r(()=>[Ce,b("a",Fe,[l(M,{block:"",color:"secondary",type:"button"},{default:r(()=>[C(" Sign Up Now ")]),_:1})])]),_:1})]),_:1}))]))}};export{Ke as default};
