import{p as z,H as G,aE as Q,k as Y,J as X,a7 as Z,a6 as ee,c as m,L as p,s as te,M as q,a0 as ae,x as le,aA as se,d as l,S as oe,W as L,aF as ne,aG as O,a4 as ue,o as D,Q as ie,a as U,w as r,f as j,U as R,aH as x,al as re,N as M,O as F,b,am as ce,aI as de}from"./main-7958c3d8.js";import{_ as fe}from"./eduall-62475736.js";import{s as N}from"./notification-17c9d469.js";import{V as E,a as P}from"./VRow-11cf934a.js";import{V as me,b as T}from"./VCard-3d531f38.js";import{V as ve}from"./VSkeletonLoader-e119c820.js";import{V as pe}from"./VForm-6657d2ad.js";import{m as _e,b as ge,a as be,c as he}from"./VField-d904be64.js";import{V as ye}from"./VOverlay-20ece883.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VAvatar-4eed4974.js";import"./VImg-aab20a6e.js";import"./index-25e5e5f7.js";import"./lazy-e309c86e.js";const ke=z({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...G(),..._e(),...Q(ge({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Ve=Y()({name:"VOtpInput",props:ke(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,w){let{attrs:k,emit:C,slots:c}=w;const{dimensionStyles:_}=X(e),{isFocused:f,focus:B,blur:I}=be(e),a=Z(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:g}=ee(),v=m(()=>Number(e.length)),S=m(()=>Array(v.value).fill(0)),o=p(-1),h=p(),d=p([]),y=m(()=>d.value[o.value]);function A(){if(e.type==="number"&&/[^0-9]/g.test(y.value.value)){y.value.value="";return}const t=a.value.slice(),s=y.value.value;t[o.value]=s;let n=null;o.value>a.value.length?n=a.value.length+1:o.value+1!==v.value&&(n="next"),a.value=t,n&&O(h.value,n)}function H(t){const s=a.value.slice(),n=o.value;let u=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?u="prev":t.key==="ArrowRight"?u="next":["Backspace","Delete"].includes(t.key)&&(s[o.value]="",a.value=s,o.value>0&&t.key==="Backspace"?u="prev":requestAnimationFrame(()=>{var i;(i=d.value[n])==null||i.select()})),requestAnimationFrame(()=>{u!=null&&O(h.value,u)}))}function J(t,s){var n,u;s.preventDefault(),s.stopPropagation(),a.value=(((n=s==null?void 0:s.clipboardData)==null?void 0:n.getData("Text"))??"").split(""),(u=d.value)==null||u[t].blur()}function K(){a.value=[]}function W(t,s){B(),o.value=s}function $(){I(),o.value=-1}return te({VField:{color:m(()=>e.color),bgColor:m(()=>e.color),baseColor:m(()=>e.baseColor),disabled:m(()=>e.disabled),error:m(()=>e.error),variant:m(()=>e.variant)}},{scoped:!0}),q(a,t=>{t.length===v.value&&C("finish",t.join(""))},{deep:!0}),q(o,t=>{t<0||ae(()=>{var s;(s=d.value[t])==null||s.select()})}),le(()=>{var n;const[t,s]=se(k);return l("div",L({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[l("div",{ref:h,class:"v-otp-input__content",style:[_.value]},[S.value.map((u,i)=>l(oe,null,[e.divider&&i!==0&&l("span",{class:"v-otp-input__divider"},[e.divider]),l(he,{focused:f.value&&e.focusAll||o.value===i,key:i},{...c,loader:void 0,default:()=>l("input",{ref:V=>d.value[i]=V,"aria-label":g(e.label,i+1),autofocus:i===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:a.value[i],onInput:A,onFocus:V=>W(V,i),onBlur:$,onKeydown:H,onPaste:V=>J(i,V)},null)})])),l("input",L({class:"v-otp-input-input",type:"hidden"},s,{value:a.value.join("")}),null),l(ye,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var u;return[((u=c.loader)==null?void 0:u.call(c))??l(ne,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(n=c.default)==null?void 0:n.call(c)])])}),{blur:()=>{var t;(t=d.value)==null||t.some(s=>s.blur())},focus:()=>{var t;(t=d.value)==null||t[0].focus()},reset:K,isFocused:f}}});const xe={class:"auth-wrapper d-flex align-center justify-center pa-4"},we=b("div",{class:"d-flex justify-center mb-10 mt-5"},[b("img",{src:fe,alt:""})],-1),Se=b("h5",{class:"text-h5 mb-1"}," Welcome to EduALL Assessment! 👋🏻 ",-1),Ae=b("p",{class:"mb-0"},[F(" Please sign in with your ticket number "),b("br"),F(" to begin the adventure. ")],-1),Fe=b("h5",{class:"mb-3"}," I don't have a ticket number, ",-1),Ce={href:"https://registration.edu-all.com/form/event?ft=cta&ev=evt-0014&et=offline&as=attend&s=ots&t=self&a=true"},Je={__name:"login",props:{ticket:String},setup(e){const w=e,k=p(!0),C=p(null),c=p(!1),_=p(!1),f=p({ticket_id:""}),B=async()=>{if(f.value.ticket_id.length==4){_.value=!0;try{const a=await ce.post("signin",{ticket_no:f.value.ticket_id});a.success?(R.saveUser(a.data),de.saveToken(a.data.token),window.location.reload()):(f.value.ticket_id="",N("error",a.message,"bottom-end")),_.value=!1}catch(a){N("error",a,"bottom-end"),_.value=!1}}else c.value=!0},I=()=>{var g,v,S,o,h,d,y,A;const a=R.getUser();a&&((g=a.client)!=null&&g.is_vip||((S=(v=a.client)==null?void 0:v.education)==null?void 0:S.grade)<7?(o=a.client)!=null&&o.took_quest?x.push({name:"dashboard"}):x.push({name:"quest"}):((h=a.client)==null?void 0:h.took_initial_assessment)==1&&((d=a.client)==null?void 0:d.took_quest)==0?x.push({name:"quest"}):((y=a.client)==null?void 0:y.took_initial_assessment)==1&&((A=a.client)==null?void 0:A.took_quest)==1?x.push({name:"dashboard"}):x.push({name:"assessment"}),setTimeout(()=>{N("success","You`ve successfully logged in","bottom-end")},1e3))};return ue(()=>{w.ticket&&(f.value.ticket_id=w.ticket),setTimeout(()=>{k.value=!1},2e3),I()}),(a,g)=>(D(),ie("div",xe,[k.value?(D(),U(E,{key:0,class:"justify-center"},{default:r(()=>[l(P,{cols:"4"},{default:r(()=>[l(ve,{class:"mx-auto border",type:"image, article, paragraph, button",elevation:"12"})]),_:1})]),_:1})):j("",!0),k.value?j("",!0):(D(),U(me,{key:1,class:"auth-card pa-4 pt-7","max-width":"500"},{default:r(()=>[we,l(T,{class:"pt-2 text-center pb-3"},{default:r(()=>[Se,Ae]),_:1}),l(T,null,{default:r(()=>[l(pe,{ref_key:"formData",ref:C,onSubmit:re(B,["prevent"])},{default:r(()=>[l(E,null,{default:r(()=>[l(P,{cols:"12",class:"pb-0"},{default:r(()=>[l(Ve,{modelValue:f.value.ticket_id,"onUpdate:modelValue":g[0]||(g[0]=v=>f.value.ticket_id=v),title:"Ticket Number",type:"text",length:"4",divider:"-",loading:_.value,error:c.value},null,8,["modelValue","loading","error"])]),_:1}),l(P,{cols:"12",class:""},{default:r(()=>[l(M,{block:"",type:"submit",loading:_.value},{default:r(()=>[F(" Sign In ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1}),l(T,{class:"text-center"},{default:r(()=>[Fe,b("a",Ce,[l(M,{block:"",color:"secondary",type:"button"},{default:r(()=>[F(" Sign Up Now ")]),_:1})])]),_:1})]),_:1}))]))}};export{Je as default};
