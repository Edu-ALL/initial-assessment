import{m as K,u as L,a as P,V as A}from"./VOverlay-d6501bdc.js";import{a as x,d as B,s as C,b as I,g as q,n as U,f as j}from"./forwardRefs-e658ad70.js";import{k as O,d as E,Z as b,a_ as T,p as F,ao as R,a6 as H,aH as N,c as D,L as X,av as Y,K as G,au as W,a$ as Z,M as z,x as J,G as Q,aj as _,b0 as M,b1 as ee,aO as $}from"./main-6a92e2f8.js";const te=F({target:[Object,Array]},"v-dialog-transition"),ne=O()({name:"VDialogTransition",props:te(),setup(i,m){let{slots:t}=m;const s={onBeforeEnter(n){n.style.pointerEvents="none",n.style.visibility="hidden"},async onEnter(n,p){var v;await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),n.style.visibility="";const{x:u,y:a,sx:o,sy:d,speed:f}=S(i.target,n),y=x(n,[{transform:`translate(${u}px, ${a}px) scale(${o}, ${d})`,opacity:0},{}],{duration:225*f,easing:B});(v=k(n))==null||v.forEach(l=>{x(l,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*f,easing:C})}),y.finished.then(()=>p())},onAfterEnter(n){n.style.removeProperty("pointer-events")},onBeforeLeave(n){n.style.pointerEvents="none"},async onLeave(n,p){var v;await new Promise(l=>requestAnimationFrame(l));const{x:u,y:a,sx:o,sy:d,speed:f}=S(i.target,n);x(n,[{},{transform:`translate(${u}px, ${a}px) scale(${o}, ${d})`,opacity:0}],{duration:125*f,easing:I}).finished.then(()=>p()),(v=k(n))==null||v.forEach(l=>{x(l,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*f,easing:C})})},onAfterLeave(n){n.style.removeProperty("pointer-events")}};return()=>i.target?E(T,b({name:"dialog-transition"},s,{css:!1}),t):E(T,{name:"dialog-transition"},t)}});function k(i){var t;const m=(t=i.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:t.children;return m&&[...m]}function S(i,m){const t=q(i),s=U(m),[n,p]=getComputedStyle(m).transformOrigin.split(" ").map(c=>parseFloat(c)),[u,a]=getComputedStyle(m).getPropertyValue("--v-overlay-anchor-origin").split(" ");let o=t.left+t.width/2;u==="left"||a==="left"?o-=t.width/2:(u==="right"||a==="right")&&(o+=t.width/2);let d=t.top+t.height/2;u==="top"||a==="top"?d-=t.height/2:(u==="bottom"||a==="bottom")&&(d+=t.height/2);const f=t.width/s.width,y=t.height/s.height,v=Math.max(1,f,y),l=f/v||0,V=y/v||0,e=s.width*s.height/(window.innerWidth*window.innerHeight),r=e>.12?Math.min(1.5,(e-.12)*10+1):1;return{x:o-(n+s.left),y:d-(p+s.top),sx:l,sy:V,speed:r}}const ae=F({id:String,...R(K({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ne}}),["absolute"])},"VMenu"),le=O()({name:"VMenu",props:ae(),emits:{"update:modelValue":i=>!0},setup(i,m){let{slots:t}=m;const s=H(i,"modelValue"),{scopeId:n}=L(),p=N(),u=D(()=>i.id||`v-menu-${p}`),a=X(),o=Y(P,null),d=G(0);W(P,{register(){++d.value},unregister(){--d.value},closeParents(e){setTimeout(()=>{!d.value&&(e==null||e&&!Z(e,a.value.contentEl))&&(s.value=!1,o==null||o.closeParents())},40)}});async function f(e){var g,h,w;const r=e.relatedTarget,c=e.target;await _(),s.value&&r!==c&&((g=a.value)!=null&&g.contentEl)&&((h=a.value)!=null&&h.globalTop)&&![document,a.value.contentEl].includes(c)&&!a.value.contentEl.contains(c)&&((w=M(a.value.contentEl)[0])==null||w.focus())}z(s,e=>{e?(o==null||o.register(),document.addEventListener("focusin",f,{once:!0})):(o==null||o.unregister(),document.removeEventListener("focusin",f))});function y(e){o==null||o.closeParents(e)}function v(e){var r,c,g;i.disabled||e.key==="Tab"&&(ee(M((r=a.value)==null?void 0:r.contentEl,!1),e.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(s.value=!1,(g=(c=a.value)==null?void 0:c.activatorEl)==null||g.focus()))}function l(e){var c;if(i.disabled)return;const r=(c=a.value)==null?void 0:c.contentEl;r&&s.value?e.key==="ArrowDown"?(e.preventDefault(),$(r,"next")):e.key==="ArrowUp"&&(e.preventDefault(),$(r,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(s.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>l(e))))}const V=D(()=>b({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-owns":u.value,onKeydown:l},i.activatorProps));return J(()=>{const e=A.filterProps(i);return E(A,b({ref:a,id:u.value,class:["v-menu",i.class],style:i.style},e,{modelValue:s.value,"onUpdate:modelValue":r=>s.value=r,absolute:!0,activatorProps:V.value,"onClick:outside":y,onKeydown:v},n),{activator:t.activator,default:function(){for(var r=arguments.length,c=new Array(r),g=0;g<r;g++)c[g]=arguments[g];return E(Q,{root:"VMenu"},{default:()=>{var h;return[(h=t.default)==null?void 0:h.call(t,...c)]}})}})}),j({id:u,Î¨openChildren:d},a)}});export{ne as V,le as a};
