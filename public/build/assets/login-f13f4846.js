import{p as J,G as Y,aO as X,i as Z,H as ee,a8 as te,a5 as ae,s as p,K as g,n as le,L as U,al as oe,v as se,aK as ne,b as a,W as ue,$ as L,aP as ie,aQ as O,M as re,aR as ce,N as de,o as I,S as me,c as R,w as d,d as j,aC as M,U as P,aS as K,aD as h,aB as fe,P as $,Q as A,a as b}from"./main-b03f3d9a.js";import{_ as ve}from"./eduall-62475736.js";import{s as x}from"./notification-17c9d469.js";import{V as q,a as N}from"./VRow-c1a5233d.js";import{V as pe,b as T}from"./VCard-c6a0a23d.js";import{V as ge}from"./VSkeletonLoader-8d1b9e74.js";import{V as _e}from"./VForm-acc26b12.js";import{m as be,b as ye,a as he,c as ke}from"./VField-f138447c.js";import{V as Ve}from"./VOverlay-8c665dd3.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VAvatar-4d7c94de.js";import"./VImg-911965c0.js";import"./forwardRefs-e658ad70.js";import"./index-e3a7e5c0.js";import"./lazy-6a311ac9.js";const xe=J({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Y(),...be(),...X(ye({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),we=Z()({name:"VOtpInput",props:xe(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,y){let{attrs:B,emit:k,slots:f}=y;const{dimensionStyles:w}=ee(e),{isFocused:m,focus:v,blur:S}=he(e),n=te(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:C}=ae(),l=p(()=>Number(e.length)),s=p(()=>Array(l.value).fill(0)),u=g(-1),D=g(),_=g([]),F=p(()=>_.value[u.value]);function E(){if(e.type==="number"&&/[^0-9]/g.test(F.value.value)){F.value.value="";return}const t=n.value.slice(),o=F.value.value;t[u.value]=o;let i=null;u.value>n.value.length?i=n.value.length+1:u.value+1!==l.value&&(i="next"),n.value=t,i&&O(D.value,i)}function Q(t){const o=n.value.slice(),i=u.value;let r=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?r="prev":t.key==="ArrowRight"?r="next":["Backspace","Delete"].includes(t.key)&&(o[u.value]="",n.value=o,u.value>0&&t.key==="Backspace"?r="prev":requestAnimationFrame(()=>{var c;(c=_.value[i])==null||c.select()})),requestAnimationFrame(()=>{r!=null&&O(D.value,r)}))}function W(t,o){var i,r;o.preventDefault(),o.stopPropagation(),n.value=(((i=o==null?void 0:o.clipboardData)==null?void 0:i.getData("Text"))??"").split(""),(r=_.value)==null||r[t].blur()}function z(){n.value=[]}function G(t,o){v(),u.value=o}function H(){S(),u.value=-1}return le({VField:{color:p(()=>e.color),bgColor:p(()=>e.color),baseColor:p(()=>e.baseColor),disabled:p(()=>e.disabled),error:p(()=>e.error),variant:p(()=>e.variant)}},{scoped:!0}),U(n,t=>{t.length===l.value&&k("finish",t.join(""))},{deep:!0}),U(u,t=>{t<0||oe(()=>{var o;(o=_.value[t])==null||o.select()})}),se(()=>{var i;const[t,o]=ne(B);return a("div",L({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[a("div",{ref:D,class:"v-otp-input__content",style:[w.value]},[s.value.map((r,c)=>a(ue,null,[e.divider&&c!==0&&a("span",{class:"v-otp-input__divider"},[e.divider]),a(ke,{focused:m.value&&e.focusAll||u.value===c,key:c},{...f,loader:void 0,default:()=>a("input",{ref:V=>_.value[c]=V,"aria-label":C(e.label,c+1),autofocus:c===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:n.value[c],onInput:E,onFocus:V=>G(V,c),onBlur:H,onKeydown:Q,onPaste:V=>W(c,V)},null)})])),a("input",L({class:"v-otp-input-input",type:"hidden"},o,{value:n.value.join("")}),null),a(Ve,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var r;return[((r=f.loader)==null?void 0:r.call(f))??a(ie,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(i=f.default)==null?void 0:i.call(f)])])}),{blur:()=>{var t;(t=_.value)==null||t.some(o=>o.blur())},focus:()=>{var t;(t=_.value)==null||t[0].focus()},reset:z,isFocused:m}}});const Se={class:"auth-wrapper d-flex align-center justify-center pa-4"},Ae=b("div",{class:"d-flex justify-center mb-10 mt-5"},[b("img",{src:ve,alt:""})],-1),Be=b("h5",{class:"text-h5 mb-1"}," Welcome to EduALL Assessment! 👋🏻 ",-1),Ce=b("p",{class:"mb-0"},[A(" Please sign in with your ticket number "),b("br"),A(" to begin the adventure. ")],-1),De=b("h5",{class:"mb-3"}," I don't have a ticket number, ",-1),Fe={href:"https://registration.edu-all.com/form/event?ft=cta&ev=evt-0014&et=offline&as=attend&s=ots&t=self&a=true"},ze={__name:"login",props:{ticket:String,id:String},setup(e){const y=e,{global:B}=re(),k=g(!0),f=g(null),w=g(!1),m=g(!1),v=g({ticket_id:""}),S=async()=>{if(v.value.ticket_id.length==4){m.value=!0;try{const l=await M.post("signin",{ticket_no:v.value.ticket_id});l.success?(P.saveUser(l.data),K.saveToken(l.data.token),await h.push("/login"),h.go(0)):(v.value.ticket_id="",x("error",l.message,"bottom-end")),m.value=!1}catch(l){x("error",l,"bottom-end"),m.value=!1}}else w.value=!0},n=()=>{var s;const l=P.getUser();l&&(((s=l.client)==null?void 0:s.took_initial_assessment)==1?h.push({name:"dashboard"}):h.push({name:"assessment"}),setTimeout(()=>{x("success","You`ve successfully logged in","bottom-end")},1e3))},C=async l=>{try{const s=await M.get("signin/u/"+l);s.success?(P.saveUser(s.data),K.saveToken(s.data.token),await h.push("/login"),h.go(0)):(v.value.ticket_id="",x("error",s.message,"bottom-end")),m.value=!1}catch(s){x("error",s,"bottom-end"),m.value=!1}};return ce(()=>{n()}),de(()=>{const l=localStorage.getItem("mode");l&&(B.name.value=l),y.ticket&&(v.value.ticket_id=y.ticket,S()),y.id&&C(y.id),setTimeout(()=>{k.value=!1},2e3)}),(l,s)=>(I(),me("div",Se,[k.value?(I(),R(q,{key:0,class:"justify-center"},{default:d(()=>[a(N,{md:"4"},{default:d(()=>[a(ge,{class:"mx-auto border",type:"image, article, paragraph, button",elevation:"12"})]),_:1})]),_:1})):j("",!0),k.value?j("",!0):(I(),R(pe,{key:1,class:"auth-card pa-4 pt-7","max-width":"500"},{default:d(()=>[Ae,a(T,{class:"pt-2 text-center pb-3"},{default:d(()=>[Be,Ce]),_:1}),a(T,null,{default:d(()=>[a(_e,{ref_key:"formData",ref:f,onSubmit:fe(S,["prevent"])},{default:d(()=>[a(q,null,{default:d(()=>[a(N,{cols:"12",class:"pb-0"},{default:d(()=>[a(we,{modelValue:v.value.ticket_id,"onUpdate:modelValue":s[0]||(s[0]=u=>v.value.ticket_id=u),title:"Ticket Number",type:"text",length:"4",loading:m.value,error:w.value},null,8,["modelValue","loading","error"])]),_:1}),a(N,{cols:"12",class:""},{default:d(()=>[a($,{block:"",type:"submit",loading:m.value},{default:d(()=>[A(" Sign In ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1}),a(T,{class:"text-center"},{default:d(()=>[De,b("a",Fe,[a($,{block:"",color:"secondary",type:"button"},{default:d(()=>[A(" Sign Up Now ")]),_:1})])]),_:1})]),_:1}))]))}};export{ze as default};
