import{p as T,ap as D,i as E,a8 as $,aJ as j,s as M,v as J,aK as K,b as a,$ as b,K as c,N as Q,aR as V,U as v,aI as W,o as q,S as z,w as i,u as s,aB as G,a as u,P as H,Q as O,aC as X}from"./main-e07c5191.js";import{_ as Y}from"./eduall-62475736.js";import{s as _}from"./notification-17c9d469.js";import{r as x}from"./rules-6eaeb69d.js";import{V as Z,b as h}from"./VCard-80277c32.js";import{V as ee}from"./VForm-c7feeca4.js";import{V as ae,a as w}from"./VRow-3cac53ac.js";import{a as se,b as k,V as y}from"./VTextField-5d9ade27.js";import{m as te,V as g}from"./VCheckboxBtn-4f5168da.js";import{a as oe}from"./VField-59538942.js";import"./_commonjsHelpers-725317a4.js";import"./VAvatar-08b8a8ec.js";import"./VImg-8d8b45dc.js";import"./forwardRefs-e658ad70.js";/* empty css              */import"./index-2701031a.js";const le=T({...se(),...D(te(),["inline"])},"VCheckbox"),re=E()({name:"VCheckbox",inheritAttrs:!1,props:le(),emits:{"update:modelValue":o=>!0,"update:focused":o=>!0},setup(o,m){let{attrs:t,slots:n}=m;const l=$(o,"modelValue"),{isFocused:p,focus:d,blur:e}=oe(o),r=j(),C=M(()=>o.id||`checkbox-${r}`);return J(()=>{const[P,U]=K(t),A=k.filterProps(o),B=g.filterProps(o);return a(k,b({class:["v-checkbox",o.class]},P,A,{modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,id:C.value,focused:p.value,style:o.style}),{...n,default:f=>{let{id:F,messagesId:I,isDisabled:L,isReadonly:N,isValid:R}=f;return a(g,b(B,{id:F.value,"aria-describedby":I.value,disabled:L.value,readonly:N.value},U,{error:R.value===!1,modelValue:l.value,"onUpdate:modelValue":S=>l.value=S,onFocus:d,onBlur:e}),n)}})}),{}}});const ie={class:"auth-wrapper d-flex align-center justify-center pa-4"},ne=u("div",{class:"d-flex justify-center mb-10 mt-5"},[u("img",{src:Y,alt:"EduALL"})],-1),de=u("h5",{class:"text-h5 mb-7 text-center"}," Welcome to EduALL Assessment Dashboard!  ",-1),ue=u("p",{class:"mb-0"}," Please sign-in ",-1),me={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},Ae={__name:"login",setup(o){const m=c(),t=c({email:"",password:"",remember:!1}),n=c(!1),l=c(!1),p=async()=>{const{valid:d}=await m.value.validate();if(d){l.value=!0;try{const e=await X.post("admin/signin",t.value);e.success?(V.saveToken(e.data.token),v.saveUser(e.data),window.location.reload()):(t.value.email="",t.value.password="",_("error",e.message,"bottom-end")),l.value=!1}catch(e){_("error",e,"bottom-end"),l.value=!1}}};return Q(()=>{var d;V.getToken()&&((d=v.getUser().client)==null?void 0:d.type)==1&&W.push({name:"admin-dashboard"})}),(d,e)=>(q(),z("div",ie,[a(Z,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:i(()=>[ne,a(h,{class:"pt-2"},{default:i(()=>[de,ue]),_:1}),a(h,null,{default:i(()=>[a(ee,{ref_key:"formData",ref:m,"validate-on":"input","fast-fail":"",disabled:s(l),onSubmit:G(p,["prevent"])},{default:i(()=>[a(ae,null,{default:i(()=>[a(w,{cols:"12"},{default:i(()=>[a(y,{modelValue:s(t).email,"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).email=r),autofocus:"",label:"Email",type:"email",rules:s(x).email},null,8,["modelValue","rules"])]),_:1}),a(w,{cols:"12"},{default:i(()=>[a(y,{modelValue:s(t).password,"onUpdate:modelValue":e[1]||(e[1]=r=>s(t).password=r),label:"Password",placeholder:"路路路路路路路路路路路路",type:s(n)?"text":"password","append-inner-icon":s(n)?"bx-hide":"bx-show",rules:s(x).minLength_8,"onClick:appendInner":e[2]||(e[2]=r=>n.value=!s(n))},null,8,["modelValue","type","append-inner-icon","rules"]),u("div",me,[a(re,{modelValue:s(t).remember,"onUpdate:modelValue":e[3]||(e[3]=r=>s(t).remember=r),label:"Remember me"},null,8,["modelValue"])]),a(H,{block:"",type:"submit"},{default:i(()=>[O(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]))}};export{Ae as default};
