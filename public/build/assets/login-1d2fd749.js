import{p as Q,G as J,aP as X,i as Z,H as ee,aa as te,a7 as ae,s as p,K as g,n as le,L as T,an as oe,v as se,aL as ne,b as a,Y as ue,a1 as L,aQ as ie,aR as R,M as re,aS as ce,O as de,o as I,W as fe,c as U,w as c,d as O,aE as j,aT as M,aU as E,P as V,N as me,aD as ve,R as K,S as A,a as b}from"./main-d9d083dd.js";import{_ as pe}from"./eduall-62475736.js";import{s as x}from"./notification-17c9d469.js";import{V as q,a as P}from"./VRow-f1a803b8.js";import{V as ge,b as N}from"./VCard-af3277ae.js";import{V as _e}from"./VSkeletonLoader-6141fc07.js";import{V as be}from"./VForm-46c92d6f.js";import{m as ye,b as he,a as ke,c as Ve}from"./VField-bce86ab0.js";import{V as xe}from"./VOverlay-603536d7.js";import"./_commonjsHelpers-725317a4.js";/* empty css              */import"./VAvatar-7b08e643.js";import"./VImg-8b60c905.js";import"./forwardRefs-e658ad70.js";import"./index-8eb98ae5.js";import"./lazy-4a7b236e.js";const we=Q({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...J(),...ye(),...X(he({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Se=Z()({name:"VOtpInput",props:we(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,y){let{attrs:B,emit:h,slots:m}=y;const{dimensionStyles:w}=ee(e),{isFocused:f,focus:v,blur:S}=ke(e),s=te(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:C}=ae(),o=p(()=>Number(e.length)),d=p(()=>Array(o.value).fill(0)),n=g(-1),D=g(),_=g([]),F=p(()=>_.value[n.value]);function W(){if(e.type==="number"&&/[^0-9]/g.test(F.value.value)){F.value.value="";return}const t=s.value.slice(),l=F.value.value;t[n.value]=l;let u=null;n.value>s.value.length?u=s.value.length+1:n.value+1!==o.value&&(u="next"),s.value=t,u&&R(D.value,u)}function Y(t){const l=s.value.slice(),u=n.value;let i=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?i="prev":t.key==="ArrowRight"?i="next":["Backspace","Delete"].includes(t.key)&&(l[n.value]="",s.value=l,n.value>0&&t.key==="Backspace"?i="prev":requestAnimationFrame(()=>{var r;(r=_.value[u])==null||r.select()})),requestAnimationFrame(()=>{i!=null&&R(D.value,i)}))}function $(t,l){var u,i;l.preventDefault(),l.stopPropagation(),s.value=(((u=l==null?void 0:l.clipboardData)==null?void 0:u.getData("Text"))??"").split(""),(i=_.value)==null||i[t].blur()}function z(){s.value=[]}function G(t,l){v(),n.value=l}function H(){S(),n.value=-1}return le({VField:{color:p(()=>e.color),bgColor:p(()=>e.color),baseColor:p(()=>e.baseColor),disabled:p(()=>e.disabled),error:p(()=>e.error),variant:p(()=>e.variant)}},{scoped:!0}),T(s,t=>{t.length===o.value&&h("finish",t.join(""))},{deep:!0}),T(n,t=>{t<0||oe(()=>{var l;(l=_.value[t])==null||l.select()})}),se(()=>{var u;const[t,l]=ne(B);return a("div",L({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[a("div",{ref:D,class:"v-otp-input__content",style:[w.value]},[d.value.map((i,r)=>a(ue,null,[e.divider&&r!==0&&a("span",{class:"v-otp-input__divider"},[e.divider]),a(Ve,{focused:f.value&&e.focusAll||n.value===r,key:r},{...m,loader:void 0,default:()=>a("input",{ref:k=>_.value[r]=k,"aria-label":C(e.label,r+1),autofocus:r===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:s.value[r],onInput:W,onFocus:k=>G(k,r),onBlur:H,onKeydown:Y,onPaste:k=>$(r,k)},null)})])),a("input",L({class:"v-otp-input-input",type:"hidden"},l,{value:s.value.join("")}),null),a(xe,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var i;return[((i=m.loader)==null?void 0:i.call(m))??a(ie,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(u=m.default)==null?void 0:u.call(m)])])}),{blur:()=>{var t;(t=_.value)==null||t.some(l=>l.blur())},focus:()=>{var t;(t=_.value)==null||t[0].focus()},reset:z,isFocused:f}}});const Ae={class:"auth-wrapper d-flex align-center justify-center pa-4"},Be=b("div",{class:"d-flex justify-center mb-10 mt-5"},[b("img",{src:pe,alt:""})],-1),Ce=b("h5",{class:"text-h5 mb-1"}," Welcome to EduALL Assessment! 👋🏻 ",-1),De=b("p",{class:"mb-0"},[A(" Please sign in with your ticket number "),b("br"),A(" to begin the adventure. ")],-1),Fe=b("h5",{class:"mb-3"}," I don't have a ticket number, ",-1),Ie={href:"https://registration.edu-all.com/form/event?ft=cta&ev=evt-0014&et=offline&as=attend&s=ots&t=self&a=true"},Ge={__name:"login",props:{ticket:String,id:String},setup(e){const y=e,{global:B}=re(),h=g(!0),m=g(null),w=g(!1),f=g(!1),v=g({ticket_id:""}),S=async()=>{if(v.value.ticket_id.length==4){f.value=!0;try{const o=await j.post("signin",{ticket_no:v.value.ticket_id});o.success?(M(o.data),E(o.data.token),await V.push("/login"),V.go(0)):(v.value.ticket_id="",x("error",o.message,"bottom-end")),f.value=!1}catch(o){x("error",o,"bottom-end"),f.value=!1}}else w.value=!0},s=()=>{me()&&(V.push({name:"assessment"}),setTimeout(()=>{x("success","You`ve successfully logged in","bottom-end")},1e3))},C=async o=>{try{const d=await j.get("signin/u/"+o);d.success?(M(d.data),E(d.data.token),await V.push("/login"),V.go(0)):(v.value.ticket_id="",x("error",d.message,"bottom-end")),f.value=!1}catch(d){x("error",d,"bottom-end"),f.value=!1}};return ce(()=>{s()}),de(()=>{const o=localStorage.getItem("mode");o&&(B.name.value=o),y.ticket&&(v.value.ticket_id=y.ticket,S()),y.id&&C(y.id),setTimeout(()=>{h.value=!1},2e3)}),(o,d)=>(I(),fe("div",Ae,[h.value?(I(),U(q,{key:0,class:"justify-center"},{default:c(()=>[a(P,{md:"4"},{default:c(()=>[a(_e,{class:"mx-auto border",type:"image, article, paragraph, button",elevation:"12"})]),_:1})]),_:1})):O("",!0),h.value?O("",!0):(I(),U(ge,{key:1,class:"auth-card pa-4 pt-7","max-width":"500"},{default:c(()=>[Be,a(N,{class:"pt-2 text-center pb-3"},{default:c(()=>[Ce,De]),_:1}),a(N,null,{default:c(()=>[a(be,{ref_key:"formData",ref:m,onSubmit:ve(S,["prevent"])},{default:c(()=>[a(q,null,{default:c(()=>[a(P,{cols:"12",class:"pb-0"},{default:c(()=>[a(Se,{modelValue:v.value.ticket_id,"onUpdate:modelValue":d[0]||(d[0]=n=>v.value.ticket_id=n),title:"Ticket Number",type:"text",length:"4",loading:f.value,error:w.value},null,8,["modelValue","loading","error"])]),_:1}),a(P,{cols:"12",class:""},{default:c(()=>[a(K,{block:"",type:"submit",loading:f.value},{default:c(()=>[A(" Sign In ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1}),a(N,{class:"text-center"},{default:c(()=>[Fe,b("a",Ie,[a(K,{block:"",color:"secondary",type:"button"},{default:c(()=>[A(" Sign Up Now ")]),_:1})])]),_:1})]),_:1}))]))}};export{Ge as default};
