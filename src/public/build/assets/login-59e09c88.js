import{p as S,ar as T,i as N,aa as j,aK as M,s as $,v as K,aL as W,b as a,a1 as b,K as c,O as J,b3 as V,U as v,P as O,o as q,W as z,w as i,u as s,aD as G,a as u,R as H,S as Q,aE as X}from"./main-aab69635.js";import{_ as Y}from"./eduall-62475736.js";import{s as _}from"./notification-17c9d469.js";import{r as x}from"./rules-af3a5abf.js";import{V as Z,b as h}from"./VCard-f1da7fbb.js";import{V as ee}from"./VForm-1df4147d.js";import{V as ae,a as w}from"./VRow-eee2d46c.js";import{a as se,b as k,V as y}from"./VTextField-d9f51cbd.js";import{m as te,V as g}from"./VCheckboxBtn-5e17a935.js";import{a as oe}from"./VField-6fe1f22c.js";import"./_commonjsHelpers-725317a4.js";import"./VAvatar-1c7a247e.js";import"./VImg-a92f7206.js";import"./forwardRefs-e658ad70.js";/* empty css              */import"./index-5ead2bd7.js";const le=S({...se(),...T(te(),["inline"])},"VCheckbox"),re=N()({name:"VCheckbox",inheritAttrs:!1,props:le(),emits:{"update:modelValue":o=>!0,"update:focused":o=>!0},setup(o,m){let{attrs:t,slots:n}=m;const l=j(o,"modelValue"),{isFocused:p,focus:d,blur:e}=oe(o),r=M(),C=$(()=>o.id||`checkbox-${r}`);return K(()=>{const[P,U]=W(t),A=k.filterProps(o),B=g.filterProps(o);return a(k,b({class:["v-checkbox",o.class]},P,A,{modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,id:C.value,focused:p.value,style:o.style}),{...n,default:f=>{let{id:L,messagesId:F,isDisabled:D,isReadonly:E,isValid:I}=f;return a(g,b(B,{id:L.value,"aria-describedby":F.value,disabled:D.value,readonly:E.value},U,{error:I.value===!1,modelValue:l.value,"onUpdate:modelValue":R=>l.value=R,onFocus:d,onBlur:e}),n)}})}),{}}});const ie={class:"auth-wrapper d-flex align-center justify-center pa-4"},ne=u("div",{class:"d-flex justify-center mb-10 mt-5"},[u("img",{src:Y,alt:"EduALL"})],-1),de=u("h5",{class:"text-h5 mb-7 text-center"}," Welcome to EduALL Assessment Dashboard!  ",-1),ue=u("p",{class:"mb-0"}," Please sign-in ",-1),me={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},Ae={__name:"login",setup(o){const m=c(),t=c({email:"",password:"",remember:!1}),n=c(!1),l=c(!1),p=async()=>{const{valid:d}=await m.value.validate();if(d){l.value=!0;try{const e=await X.post("admin/signin",t.value);e.success?(V.saveToken(e.data.token),v.saveUser(e.data),window.location.reload()):(t.value.email="",t.value.password="",_("error",e.message,"bottom-end")),l.value=!1}catch(e){_("error",e,"bottom-end"),l.value=!1}}};return J(()=>{var d;V.getToken()&&((d=v.getUser().client)==null?void 0:d.type)==1&&O.push({name:"admin-dashboard"})}),(d,e)=>(q(),z("div",ie,[a(Z,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:i(()=>[ne,a(h,{class:"pt-2"},{default:i(()=>[de,ue]),_:1}),a(h,null,{default:i(()=>[a(ee,{ref_key:"formData",ref:m,"validate-on":"input","fast-fail":"",disabled:s(l),onSubmit:G(p,["prevent"])},{default:i(()=>[a(ae,null,{default:i(()=>[a(w,{cols:"12"},{default:i(()=>[a(y,{modelValue:s(t).email,"onUpdate:modelValue":e[0]||(e[0]=r=>s(t).email=r),autofocus:"",label:"Email",type:"email",rules:s(x).email},null,8,["modelValue","rules"])]),_:1}),a(w,{cols:"12"},{default:i(()=>[a(y,{modelValue:s(t).password,"onUpdate:modelValue":e[1]||(e[1]=r=>s(t).password=r),label:"Password",placeholder:"路路路路路路路路路路路路",type:s(n)?"text":"password","append-inner-icon":s(n)?"bx-hide":"bx-show",rules:s(x).minLength_8,"onClick:appendInner":e[2]||(e[2]=r=>n.value=!s(n))},null,8,["modelValue","type","append-inner-icon","rules"]),u("div",me,[a(re,{modelValue:s(t).remember,"onUpdate:modelValue":e[3]||(e[3]=r=>s(t).remember=r),label:"Remember me"},null,8,["modelValue"])]),a(H,{block:"",type:"submit"},{default:i(()=>[Q(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]))}};export{Ae as default};
